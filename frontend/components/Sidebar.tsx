import Image from "next/image";
import Link from "next/link";
import { useRouter } from "next/router";
import { useEffect, useLayoutEffect, useState } from "react";
import { useWeb3React } from "@web3-react/core";
import { ethers } from "ethers";
import { Logout } from "../assets/icons";

enum NavTabId {
  Home,
  Mint,
  Support,
}
const NavItems = [
  {
    text: "Home",
    navTabId: NavTabId.Home,
    icon: (
      <svg
        width="34"
        height="29"
        viewBox="0 0 34 29"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M13.6663 28.3333V18.3333H20.333V28.3333H28.6663V15H33.6663L16.9997 0L0.333008 15H5.33301V28.3333H13.6663Z"
          fill="#8D8D8E"
        />
      </svg>
    ),
    activeIcon: (
      <svg
        width="34"
        height="29"
        viewBox="0 0 34 29"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M13.6663 28.3333V18.3333H20.333V28.3333H28.6663V15H33.6663L16.9997 0L0.333008 15H5.33301V28.3333H13.6663Z"
          fill="#fff"
        />
      </svg>
    ),
  },
  {
    text: "Mint",
    navTabId: NavTabId.Mint,
    icon: (
      <svg
        width="26"
        height="28"
        viewBox="0 0 26 28"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M16.4545 11.3789L4.98759 27.5591C4.82499 27.7891 4.58002 27.9428 4.30674 27.9871C4.03345 28.0311 3.754 27.9615 3.5308 27.7939L0.429577 25.5098C0.205647 25.3434 0.0557664 25.0922 0.0125729 24.8115C-0.0302527 24.5312 0.0372513 24.2449 0.200928 24.0156L11.6892 7.81358L3.78063 1.92207C3.41516 1.64214 3.27035 1.15077 3.42314 0.710015C3.57593 0.269257 3.99076 -0.0180959 4.44663 0.000886833L6.83979 0.128944C9.6895 0.31656 12.43 1.32232 14.7483 3.0321L17.2456 0.406633C17.6035 0.0261969 18.1787 -0.0281494 18.5986 0.278576L21.2832 2.26376C21.7056 2.57496 21.8388 3.15827 21.5953 3.62991L19.9095 6.85316C22.2057 8.58448 23.98 10.9446 25.0292 13.6623L25.9242 16.0316V16.032C26.0984 16.4746 25.9652 16.9819 25.5976 17.2749C25.2299 17.5675 24.7175 17.5742 24.3426 17.2913L16.4545 11.3789Z"
          fill="#8D8D8E"
        />
      </svg>
    ),
    activeIcon: (
      <svg
        width="26"
        height="28"
        viewBox="0 0 26 28"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M16.4545 11.3789L4.98759 27.5591C4.82499 27.7891 4.58002 27.9428 4.30674 27.9871C4.03345 28.0311 3.754 27.9615 3.5308 27.7939L0.429577 25.5098C0.205647 25.3434 0.0557664 25.0922 0.0125729 24.8115C-0.0302527 24.5312 0.0372513 24.2449 0.200928 24.0156L11.6892 7.81358L3.78063 1.92207C3.41516 1.64214 3.27035 1.15077 3.42314 0.710015C3.57593 0.269257 3.99076 -0.0180959 4.44663 0.000886833L6.83979 0.128944C9.6895 0.31656 12.43 1.32232 14.7483 3.0321L17.2456 0.406633C17.6035 0.0261969 18.1787 -0.0281494 18.5986 0.278576L21.2832 2.26376C21.7056 2.57496 21.8388 3.15827 21.5953 3.62991L19.9095 6.85316C22.2057 8.58448 23.98 10.9446 25.0292 13.6623L25.9242 16.0316V16.032C26.0984 16.4746 25.9652 16.9819 25.5976 17.2749C25.2299 17.5675 24.7175 17.5742 24.3426 17.2913L16.4545 11.3789Z"
          fill="#fff"
        />
      </svg>
    ),
  },
  {
    text: "Support",
    navTabId: NavTabId.Support,
    icon: (
      <svg
        width="21"
        height="28"
        viewBox="0 0 21 28"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M20.5334 27.0667C20.5336 27.3142 20.4353 27.5517 20.2603 27.7269C20.085 27.9019 19.8475 28.0002 19.6 28H0.93334C0.685841 28.0002 0.448337 27.9019 0.273126 27.7269C0.0981282 27.5517 -0.000207671 27.3142 3.29302e-07 27.0667C3.29302e-07 24.3437 1.08166 21.7322 3.0071 19.8069C4.93254 17.8815 7.54374 16.7998 10.2668 16.7998C12.9899 16.7998 15.6013 17.8815 17.5266 19.8069C19.452 21.7324 20.5334 24.3436 20.5334 27.0667ZM10.2667 3.73329C8.78146 3.73329 7.35709 4.32326 6.3069 5.3735C5.25671 6.42374 4.66668 7.84807 4.66668 9.33329C4.66668 10.8185 5.25666 12.2429 6.3069 13.2931C7.35714 14.3433 8.78146 14.9333 10.2667 14.9333C11.7519 14.9333 13.1763 14.3433 14.2265 13.2931C15.2767 12.2428 15.8667 10.8185 15.8667 9.33329C15.865 7.84849 15.2746 6.42518 14.2246 5.37537C13.1748 4.32534 11.7515 3.73494 10.2667 3.73329ZM1.86668 12.1333C2.36147 12.1327 2.83607 11.9358 3.18583 11.5858C3.53583 11.236 3.73271 10.7614 3.73335 10.2666V8.39996C3.73335 7.73308 3.37751 7.11681 2.80002 6.78332C2.22252 6.44998 1.51084 6.44998 0.933346 6.78332C0.355851 7.11686 1.09087e-05 7.73313 1.09087e-05 8.39996V10.2666C0.000635923 10.7614 0.19751 11.236 0.547532 11.5858C0.897325 11.9358 1.37191 12.1327 1.86668 12.1333ZM10.2667 1.86662C12.8163 1.86912 15.1881 3.1735 16.5563 5.32518C17.0913 4.96289 17.7119 4.74662 18.3563 4.69809C17.2659 2.78662 15.5338 1.32331 13.4673 0.567041C11.4007 -0.189014 9.13314 -0.189014 7.06626 0.567041C4.9998 1.32331 3.2677 2.78662 2.17729 4.69809C2.82167 4.74663 3.44231 4.96288 3.9773 5.32518C5.34519 3.1735 7.71688 1.86912 10.2667 1.86662ZM18.6667 6.53329C18.1719 6.53392 17.6973 6.73079 17.3476 7.08081C16.9976 7.4306 16.8007 7.90519 16.8 8.39996V10.2666C16.8011 10.8995 17.1232 11.4887 17.6555 11.8312C17.5129 12.4466 17.1663 12.996 16.6721 13.3898C16.1779 13.7835 15.5652 13.9985 14.9333 14C14.5998 14 14.2917 14.1779 14.125 14.4666C13.9583 14.7554 13.9583 15.1112 14.125 15.4C14.2917 15.6887 14.5998 15.8666 14.9333 15.8666C16.0448 15.8635 17.1185 15.4635 17.9611 14.7385C18.8036 14.0135 19.3592 13.0112 19.5279 11.9127C19.8298 11.7563 20.0831 11.5202 20.2604 11.23C20.4377 10.9398 20.5321 10.6066 20.5333 10.2667V8.40001C20.5327 7.90522 20.3358 7.43062 19.9858 7.08086C19.636 6.73086 19.1615 6.53393 18.6667 6.53329Z"
          fill="#8D8D8E"
        />
      </svg>
    ),
    activeIcon: (
      <svg
        width="21"
        height="28"
        viewBox="0 0 21 28"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M20.5334 27.0667C20.5336 27.3142 20.4353 27.5517 20.2603 27.7269C20.085 27.9019 19.8475 28.0002 19.6 28H0.93334C0.685841 28.0002 0.448337 27.9019 0.273126 27.7269C0.0981282 27.5517 -0.000207671 27.3142 3.29302e-07 27.0667C3.29302e-07 24.3437 1.08166 21.7322 3.0071 19.8069C4.93254 17.8815 7.54374 16.7998 10.2668 16.7998C12.9899 16.7998 15.6013 17.8815 17.5266 19.8069C19.452 21.7324 20.5334 24.3436 20.5334 27.0667ZM10.2667 3.73329C8.78146 3.73329 7.35709 4.32326 6.3069 5.3735C5.25671 6.42374 4.66668 7.84807 4.66668 9.33329C4.66668 10.8185 5.25666 12.2429 6.3069 13.2931C7.35714 14.3433 8.78146 14.9333 10.2667 14.9333C11.7519 14.9333 13.1763 14.3433 14.2265 13.2931C15.2767 12.2428 15.8667 10.8185 15.8667 9.33329C15.865 7.84849 15.2746 6.42518 14.2246 5.37537C13.1748 4.32534 11.7515 3.73494 10.2667 3.73329ZM1.86668 12.1333C2.36147 12.1327 2.83607 11.9358 3.18583 11.5858C3.53583 11.236 3.73271 10.7614 3.73335 10.2666V8.39996C3.73335 7.73308 3.37751 7.11681 2.80002 6.78332C2.22252 6.44998 1.51084 6.44998 0.933346 6.78332C0.355851 7.11686 1.09087e-05 7.73313 1.09087e-05 8.39996V10.2666C0.000635923 10.7614 0.19751 11.236 0.547532 11.5858C0.897325 11.9358 1.37191 12.1327 1.86668 12.1333ZM10.2667 1.86662C12.8163 1.86912 15.1881 3.1735 16.5563 5.32518C17.0913 4.96289 17.7119 4.74662 18.3563 4.69809C17.2659 2.78662 15.5338 1.32331 13.4673 0.567041C11.4007 -0.189014 9.13314 -0.189014 7.06626 0.567041C4.9998 1.32331 3.2677 2.78662 2.17729 4.69809C2.82167 4.74663 3.44231 4.96288 3.9773 5.32518C5.34519 3.1735 7.71688 1.86912 10.2667 1.86662ZM18.6667 6.53329C18.1719 6.53392 17.6973 6.73079 17.3476 7.08081C16.9976 7.4306 16.8007 7.90519 16.8 8.39996V10.2666C16.8011 10.8995 17.1232 11.4887 17.6555 11.8312C17.5129 12.4466 17.1663 12.996 16.6721 13.3898C16.1779 13.7835 15.5652 13.9985 14.9333 14C14.5998 14 14.2917 14.1779 14.125 14.4666C13.9583 14.7554 13.9583 15.1112 14.125 15.4C14.2917 15.6887 14.5998 15.8666 14.9333 15.8666C16.0448 15.8635 17.1185 15.4635 17.9611 14.7385C18.8036 14.0135 19.3592 13.0112 19.5279 11.9127C19.8298 11.7563 20.0831 11.5202 20.2604 11.23C20.4377 10.9398 20.5321 10.6066 20.5333 10.2667V8.40001C20.5327 7.90522 20.3358 7.43062 19.9858 7.08086C19.636 6.73086 19.1615 6.53393 18.6667 6.53329Z"
          fill="#fff"
        />
      </svg>
    ),
  },
];


const Sidebar = () => {

  
  const router = useRouter();
  const { active, activate, deactivate, chainId, account, library: provider } = useWeb3React<ethers.providers.JsonRpcProvider>();

  const [activeTab, setActiveTab] = useState<NavTabId>(NavTabId.Home);

  useEffect(() => {
    const { pathname } = router;
    if (pathname === "/minting") {
      setActiveTab(NavTabId.Mint);
    } else if (pathname === "/dashboard") {
      setActiveTab(NavTabId.Home);
    }
  }, [router]);

  const clickHandle = (href: string) => {
    if (href === "Home") {
      router.push("/dashboard");
    } else if (href === "Mint") {
      router.push("/minting");
    }
  };

  const disconnect = async () => {
    deactivate();
  };

  return (
    <div className="w-44 bg-[#121212] min-h-screen fixed left-0 top-0 flex flex-col ">
      <Link href={"/"}>
        <div className="flex items-center justify-center border-b border-[#FFFFFF] border-opacity-10 py-5 cursor-pointer">
          <Image
            alt="logo"
            height={78}
            width={68}
            src={"/assets/icons/logo.svg"}
          />
        </div>
      </Link>

      <div className="flex flex-col items-center justify-between flex-1 py-5 ">
        <nav className="space-y-3">
          {NavItems.map(({ text, navTabId, icon, activeIcon }, index) => (
            <div
              className={`${
                navTabId === activeTab ? " bg-[#F5931B] " : "bg-[#191B1F]"
              } rounded-lg flex flex-col justify-center items-center p-5 cursor-pointer duration-300`}
              key={index + 1}
              onClick={() => {
                clickHandle(text);
              }}
            >
              {navTabId === activeTab ? <>{activeIcon}</> : <>{icon}</>}

              <h1>{text}</h1>
            </div>
          ))}
        </nav>

        {
          active && (
            <button
              onClick={disconnect} 
              className="border border-[#5761707A] rounded-lg flex items-center justify-center py-2 px-6">
              <Logout />
              <span className="font-medium  text-base text-[#F6543E] ml-1">
                Logout
              </span>
            </button>
          )
        }

      </div>
    </div>
  );
};

export default Sidebar;
